<!DOCTYPE html>
<html>
<body>

<h3>Firebase Storage Test</h3>

<textarea id="text" placeholder="Type something..."></textarea><br><br>
<button id="upload">Upload Note</button>

<p id="status"></p>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getStorage, ref, uploadBytes } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js";

  // FIXED Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyAM_L7QRSttLJQxf6AJSfiFWWQddEWP75M",
    authDomain: "hla-fitness-a296a.firebaseapp.com",
    projectId: "hla-fitness-a296a",
    storageBucket: "hla-fitness-a296a.appspot.com",   // <-- FIXED HERE
    messagingSenderId: "158123447646",
    appId: "1:158123447646:web:c5d4e8d1e0ccdb27b0abcf",
    measurementId: "G-4FDYQPXKE4"
  };

  const app = initializeApp(firebaseConfig);
  const storage = getStorage(app);

  document.getElementById("upload").onclick = async () => {
    const text = document.getElementById("text").value;
    const status = document.getElementById("status");

    if (!text) {
      status.textContent = "Type something first.";
      return;
    }

    status.textContent = "Uploading...";

    const blob = new Blob([text], { type: "text/plain" });
    const fileRef = ref(storage, "test-note.txt");

    try {
      await uploadBytes(fileRef, blob);
      status.textContent = "Upload successful!";
    } catch (err) {
      status.textContent = "Error: " + err.message;
      console.error(err);
    }
  };
</script>

</body>
</html>
